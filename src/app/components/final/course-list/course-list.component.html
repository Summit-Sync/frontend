<div class="searchBarWrapper">
  <div class="dropdown">
    <button class="dropbtn" (click)="displayDropdown = !displayDropdown">
      {{ displayOption }}
    </button>
    <div
      class="dropdown-content"
      [ngClass]="{ 'show-dropdown-content': displayDropdown }"
    >
      <button
        *ngFor="let filterOption of filterOptions"
        (click)="optionClicked(filterOption)"
      >
        {{ filterOption }}
      </button>
    </div>
  </div>
  <input
    [type]="displayOption == FilterOption.StartDate ? 'date' : 'text'"
    *ngIf="
      displayOption == FilterOption.StartDate ||
      displayOption == FilterOption.TrainerFullName ||
      displayOption == FilterOption.CourseAcronym
    "
    [(ngModel)]="searchText"
  />
  <!-- <svg
    xmlns="http://www.w3.org/2000/svg"
    width="30"
    height="30"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
    (click)="searchFilteredCourses()"
  >
    <circle cx="11" cy="11" r="8"></circle>
    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
  </svg> -->
</div>

<table>
  <thead>
    <tr>
      <th>Kurskürzel</th>
      <th>Nr</th>
      <th>Termin 1.</th>
      <th>Termin 2.</th>
      <th>Termine insgesamt</th>
      <th>Trainer</th>
      <th>Belegte Plätze</th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let c of courses | async">
      <tr *ngIf="c | search : displayOption : searchText">
        <!-- <tr> -->
        <td>{{ c.acronym }}</td>
        <td>{{ c.courseNumber }}</td>
        <td>
          {{ c.dates[0] | date : "EEEE, d MMMM yyyy HH:mm" : "de" }}
        </td>
        <td>
          {{ c.dates[1] | date : "EEEE, d MMMM yyyy HH:mm" : "de" }}
        </td>
        <td>{{ c.dates.length }}</td>
        <td>
          <span *ngFor="let trainer of c.trainers">
            {{ trainer.firstName }}
            {{ trainer.lastName }}
          </span>
        </td>
        <td>{{ c.participants.length + "/" + c.numberParticipants }}</td>
        <td>
          <button (click)="showDetails(c)">Bewerben</button>
        </td>
        <td>
          <button (click)="showEdit(c)">Bearbeiten</button>
        </td>
        <td>
          <button (click)="delete(c)">Löschen</button>
        </td>
      </tr>
    </ng-container>
  </tbody>
</table>
<button (click)="showTemplateList()">
  Kurs anhand einer Vorlage erstellen
</button>

<!-- <div *ngIf="showingCourse">
  <app-course
    (close)="hideCourse()"
    [isEdit]="showingEdit"
    [isDelete]="showingDelete"
  >
  </app-course>
</div> -->
