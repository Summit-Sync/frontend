<div class="outer">
  <div class="courseBody">
    <div>
      <p>Kurstitel:</p>
      <input type="text" [(ngModel)]="courseData.title" />
    </div>
    <div>
      <p>Kursnummer:</p>
      <p>
        {{ !isCreate ? courseData.courseNumber : "Wird automatisch erstellt!" }}
      </p>
    </div>
    <div>
      <p>Beschreibung:</p>

      <input type="text" [(ngModel)]="courseData.description" />
    </div>
    <div class="listWrapper">
      <table>
        <thead>
          <tr>
            <th>Datum</th>
            <th>Start Zeit</th>
            <th>End Zeit</th>
          </tr>
        </thead>
        <tbody>
          <ng-container
            *ngFor="let currentDate of courseData.dates; let i = index"
          >
            <tr>
              <td>
                <input
                  type="date"
                  [ngModel]="currentDate | date : 'yyyy-MM-dd'"
                  (input)="onDateChange($event, i)"
                />
              </td>
              <td>
                <input
                  type="time"
                  [ngModel]="mappedDateTime[i][0]"
                  (input)="onStartTimeChange($event, i)"
                />
              </td>
              <td>
                <!-- <input
                      type="time"
                      [ngModel]="mappedDateTime[i][1]"
                      (input)="onEndTimeChange($event, i)"
                    /> -->
                {{ mappedDateTime[i][1] }}
              </td>
              <button (click)="deleteDate(i)">-</button>
            </tr>
          </ng-container>
        </tbody>
      </table>
      <button (click)="addDate()">Termin hinzufügen</button>
    </div>

    <div>
      <p>Maximale Teilnehmeanzahl:</p>
      <input
        type="number"
        [(ngModel)]="courseData.numberParticipants"
        (input)="
          onMaxParticipantsChange(
            this.courseData.numberParticipants,
            this.courseData.participants
          )
        "
      />
    </div>
    <div class="listWrapper">
      <table>
        <thead>
          <tr>
            <th>Vorname</th>
            <th>Nachname</th>
            <th>Status</th>
            <th>email</th>
            <th>Telefonnummer</th>
          </tr>
        </thead>
        <tbody>
          <ng-container
            *ngFor="let p of courseData.participants; let i = index"
          >
            <tr>
              <td>
                <input
                  type="text"
                  [(ngModel)]="p.firstName"
                  [placeholder]="p.firstName ? p.firstName : 'leer'"
                />
              </td>
              <td>
                <input
                  type="text"
                  [(ngModel)]="p.name"
                  [placeholder]="p.name ? p.name : 'leer'"
                />
              </td>
              <td>
                <input
                  type="text"
                  [(ngModel)]="p.status.text"
                  [placeholder]="
                    p.status && p.status.text ? p.status.text : 'leer'
                  "
                />
              </td>
              <td>
                <input
                  type="text"
                  [(ngModel)]="p.email"
                  [placeholder]="p.email ? p.email : 'leer'"
                />
              </td>
              <td>
                <input
                  type="text"
                  [(ngModel)]="p.phone"
                  [placeholder]="p.phone ? p.phone : 'leer'"
                />
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
    <div>
      <p>Maximale Wartelistenlänge:</p>
      <input
        type="number"
        [(ngModel)]="courseData.numberWaitlist"
        (input)="
          onMaxParticipantsChange(
            this.courseData.numberWaitlist,
            this.courseData.waitList
          )
        "
      />
    </div>
    <div class="listWrapper">
      <table>
        <thead>
          <tr>
            <th>Vorname</th>
            <th>Nachname</th>
            <th>Status</th>
            <th>email</th>
            <th>Telefonnummer</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let wp of courseData.waitList; let i = index">
            <tr>
              <td>
                <input
                  type="text"
                  [(ngModel)]="wp.firstName"
                  [placeholder]="wp.firstName ? wp.firstName : 'leer'"
                />
              </td>
              <td>
                <input
                  type="text"
                  [(ngModel)]="wp.name"
                  [placeholder]="wp.name ? wp.name : 'leer'"
                />
              </td>
              <td>
                <input
                  type="text"
                  [(ngModel)]="wp.status.text"
                  [placeholder]="
                    wp.status && wp.status.text ? wp.status.text : 'leer'
                  "
                />
              </td>
              <td>
                <input
                  type="text"
                  [(ngModel)]="wp.email"
                  [placeholder]="wp.email ? wp.email : 'leer'"
                />
              </td>
              <td>
                <input
                  type="text"
                  [(ngModel)]="wp.phone"
                  [placeholder]="wp.phone ? wp.phone : 'leer'"
                />
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
    <div>
      <div>
        <p>Preise:</p>
      </div>
      <div class="priceWrapper">
        <ng-container *ngFor="let price of courseData.prices; let i = index">
          <input type="text" [(ngModel)]="price.name" />
          <input type="number" [(ngModel)]="price.price" />
          <button (click)="deletePrice(i)">-</button>
        </ng-container>
        <button (click)="addPrice()">Preis hinzufügen</button>
      </div>
    </div>
    <div>
      <p>Ort:</p>
      <app-multi-select-dropdown
        [allOptions]="allCheckboxListLocations"
        [selectedOptions]="selectedLocations"
        [dropdownHeadline]="'Location'"
        [allowMultiple]="false"
      >
      </app-multi-select-dropdown>
    </div>
    <div>
      <p>Treffpunkt:</p>
      <input type="text" [(ngModel)]="courseData.meetingPoint" />
    </div>
    <div>
      <p>Trainer Qualifikation:</p>
      <app-multi-select-dropdown
        [allOptions]="allCheckboxListQualifications"
        [selectedOptions]="selectedQualifications"
        [dropdownHeadline]="'Qualifikationen'"
        [allowMultiple]="true"
      >
      </app-multi-select-dropdown>
    </div>
    <!-- <div *ngIf="!isCreate"> -->
    <div>
      <p>Trainer:</p>

      <app-multi-select-dropdown
        [allOptions]="allCheckboxListTrainers"
        [selectedOptions]="selectedTrainers"
        [dropdownHeadline]="'Trainer'"
        [allowMultiple]="true"
      >
      </app-multi-select-dropdown>
    </div>
    <div>
      <p>Notizen:</p>

      <input type="text" [(ngModel)]="courseData.notes" />
    </div>
  </div>
  <div class="button-div">
    <button (click)="save()">Speichern</button>
    <button (click)="cancel()">Abbrechen</button>
    <button *ngIf="!isCreate" (click)="cancelCourse()">Kurs absagen</button>
  </div>
</div>
